#!/bin/bash

pkg_sync_db() {
  local RSYNCOPTS=""
  
  msg_start_nnl "updating package builds database..."
  
  if [ "$PKG_VERBOSE" = "1" ]
  then
    rsync --verbose --recursive --links --perms \
      --times --devices --delete --timeout=300 \
      rsync://$RSYNCMIRROR/builds $PACKAGEDIR
  else
    rsync --quiet --recursive --links --perms \
      --times --devices --delete --timeout=300 \
      rsync://$RSYNCMIRROR/builds $PACKAGEDIR 2>/dev/null
  fi    
  
  if [ $? -ne 0 ]
  then
    msg_failed
    msg_error "updating the package builds database failed."
    pkg_exit "pkg_sync_db()" "rsync_returned_>_0" "$LINENO" 1
  fi
  msg_done		      		 
}