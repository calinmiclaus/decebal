NAME=xfce4-session
VERSION=4.2.2
ARCH=i686
RELEASE=1
URL="http://www.xfce.org/"
DESC="Session manager for the XFce desktop environment."
GROUP=xfce
LICENSE=GPLv2
SIZE="1464K"
HUSE="gconf static debug profile"

SOURCES="http://www.us.xfce.org/archive/xfce-4.2.2/src/xfce4-session-4.2.2.tar.gz"

BACKUPS="etc/opt/xfce/xdg/xfce4-session/xfce4-session.rc"

BUILDTIME="gettext >=pkgconfig-0.9.0"

RUNTIME=">=xfce-mcs-manager-4.2.0 sudo >=libxfcegui4-4.2.0 >=libxfce4util-4.2.0"

use gconf && RUNTIME="$RUNTIME gconf"

build() {
  cd $SRC/$NAME-$VERSION
  
  use gconf && OPTS="--enable-gconf" || OPTS="--disable-gconf"
  use static && OPTS="$OPTS --enable-static" || OPTS="$OPTS --disable-static"
  use debug && OPTS="$OPTS --enable-debug=full"
  use profile && OPTS="$OPTS --enable-profiling"
  
  ./configure --prefix=/opt/xfce \
              --sysconfdir=/etc/opt/xfce \
	      --libexecdir=/opt/xfce/bin \
	      --mandir=/opt/xfce/share/man \
	      --with-locales-dir=/usr/share/locale \
	      --enable-final \
	      --enable-session-screenshots \
	      --with-shutdown-style=sudo \
	      $OPTS
  make
  make DESTDIR=$PKG install
  
  install_docs AUTHORS BUGS COPYING ChangeLog ChangeLog.pre-xfce-devel \
    INSTALL NEWS README TODO
}
