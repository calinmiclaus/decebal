NAME=lynx
VERSION=2.8.5
ARCH=i686
RELEASE=1
URL="http://lynx.isc.org"
DESC="A text mode WWW browser."
GROUP=web
LICENSE=GPLv2
SIZE="2126K"
HUSE="nls ipv6 gnutls sock socks5 kbd scroll syslog bzip zlib"

SOURCES="http://lynx.isc.org/release/lynx2.8.5.tar.bz2"

RUNTIME=">=ncurses-5.3"

use nls && BUILDTIME="gettext"
use gnutls && RUNTIME="$RUNTIME gnutls" || RUNTIME="$RUNTIME >=openssl-0.9.7e"
use socks && RUMTIME="$RUNTIME socks"
use socks5 && RUNTIME="$RUNTIME socks5"
use bzip && RUNTIME="$RUNTIME bzip2"
use zlib && RUNTIME="$RUNTIME >=zlib-1.2.1"

build () { 
  cd $SRC/${NAME}2-8-5
  
  use ipv6 && OPTS="--enable-ipv6" || OPTS="--disable-ipv6"
  use nls && OPTS="$OPTS --enable-nls"
  use gnutls && OPTS="$OPTS --with-gnutls --without-ssl" || OPTS="$OPTS --with-ssl --without-gnutls"
  use socks && OPTS="$OPTS --with-socks"
  use socks5 && OPTS="$OPTS --with-socks5"
  use kbd && OPTS="$OPTS --enable-kbd-layout"
  use scroll && OPTS="$OPTS --enable-scrollbar"
  use syslog && OPTS="$OPTS --enable-syslog"
  use bzip && OPTS="$OPTS --with-bzlib"
  use zlib && OPTS="$OPTS --with-zlib"
  
  ./configure --prefix=/usr \
              --libdir=/usr/lib/lynx \
	      --with-screen=ncurses \
	      --enable-color-style \
	      --enable-default-colors \
	      --enable-prettysrc \
	      $OPTS
  make
  make DESTDIR=$PKG install
  make DESTDIR=$PKG install-help
  make DESTDIR=$PKG install-doc
    
  install_docs ABOUT-NLS CHANGES COPYHEADER COPYING INSTALLATION \
    PROBLEMS README
}
